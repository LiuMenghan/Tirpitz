'use strict';
var Fs = require('fs');

var Util = require('../util.js');

exports = module.exports = function(){
	return exports;
}
	
exports.handle = function(node, tplPath, buildFilePath,  starttime){	
	var writer = Fs.createWriteStream(buildFilePath, {
		flags: 'w',
		defaultEncoding: 'utf8',
		fd: null,
		mode: 0o666
	});
	Util.traverseNodeTree(node, buildFilePath, function(textNode, buildFilePath){
		
		var text = textNode.text;
		writer.write(text);
	});
	
	writer.end();
	var endtime = new Date().getTime();			
	console.log("Parse " + tplPath + " to " + buildFilePath + ".(" + (endtime - starttime) + " milliseconds)");
}

exports.getOutput = function(buildObj){
	return buildObj;
}